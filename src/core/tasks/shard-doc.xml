<task id="_bmad/core/tasks/shard-doc" name="Shard Document"
  description="Compatibility wrapper for the native shard-doc skill. Use if the user says perform shard document">
  <objective>Preserve the legacy /bmad-shard-doc command surface while delegating to the native shard-doc skill</objective>

  <llm critical="true">
    <i>MANDATORY: Execute ALL steps in the flow section IN EXACT ORDER</i>
    <i>DO NOT skip steps or change the sequence</i>
    <i>HALT immediately when halt-conditions are met</i>
    <i>Each action xml tag within step xml tag is a REQUIRED action to complete that step</i>
    <i>Sections outside flow (validation, output, critical-context) provide essential context - review and apply throughout execution</i>
  </llm>

  <critical-context>
    <i>The canonical shard-doc source-of-truth now lives at `{project-root}/_bmad/core/skills/shard-doc/SKILL.md`</i>
    <i>This XML task remains only as an explicit first-wave compatibility shim for `/bmad-shard-doc`</i>
  </critical-context>

  <flow>
    <step n="1" title="Load Native Skill">
      <action>Read the entire skill file at `{project-root}/_bmad/core/skills/shard-doc/SKILL.md`</action>
      <action>Use that skill as the canonical instruction set for shard-doc behavior</action>
      <action if="skill file missing">HALT with an error explaining the native shard-doc skill is missing from the installation</action>
    </step>

    <step n="2" title="Execute Native Skill">
      <action>Follow every instruction in the native shard-doc skill exactly as written</action>
      <action>Preserve the established `/bmad-shard-doc` user-facing behavior throughout the interaction</action>
    </step>
  </flow>

  <halt-conditions critical="true">
    <i>HALT if the native skill file is missing or if the delegated shard-doc flow halts with an error</i>
  </halt-conditions>
</task>
